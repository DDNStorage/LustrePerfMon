# Configuration file of Exascaler monitoring system
#
# Configuration Guide:
# 
# $iso_path:
# $iso_path is the path of the ESMON ISO path. If no $iso_path is configured,
# the ISO will be serched under the current directory.
#
# $ssh_hosts:
# $ssh_hosts includes the informations of logining to the server hosts using
# SSH connections. $host_id is the unique ID of the host. Two hosts shouldn't
# share a same $host_id. $hostname is the host name to use when connecting to
# the host using SSH. $host_id and $hostname could be different, because there
# could multiple ways to connect to the same host. $ssh_identity_file is the
# SSH key file used when connecting to the host. $ssh_identity_file could be
# omitted if the default SSH identity file works.
#
# $client_hosts:
# $client_hosts includes all of the hosts that ESMON client packages should be
# installed and configured. $lustre_oss defines whether to enable metric
# collection of Lustre OSS. $lustre_mds defines whether to enable metric
# collection of Lustre MDS. $ime defines whether to enable metric collection of
# DDN IME.
#
# server_host:
# $host_id in $server_host is the host ID that ESMON server packages should be
# installed and configured. If $reinstall is false, ESMON server is assumed
# to be installed, and $erase_influxdb and $drop_database will be ignored. If
# $erase_influxdb is true, all of the data and metadata of Influxdb will be
# erased completely. And if $drop_database is true, the database of ESMON in
# Influxdb will be dropped. $erase_influxdb and $drop_database should only be
# when the data in Influxdb is not needed any more. By enabling
# $erage_influxdb, some corruption problems of Influxdb could be fixed. $sfas
# includes the information of the SFAs. $name, $controller0_host and
# $controller1_host should be configured for each SFA. $name should be unique
# for each SFA, since it will be used as the fully qualified domain name (FQDN)
# of the metrics collected from that SFA.
#
iso_path: /work/ISOs/esmon.iso             # ISO path to ESMON
ssh_hosts:                                 # Array of hosts
  - host_id: server17                      # ID of this SSH host
    hostname: server17                     # The host name
    ssh_identity_file: /root/.ssh/id_dsa   # The SSH key to connect to the host
  - host_id: server1
    hostname: server1
  - host_id: server2
    hostname: server2
  - host_id: server4
    hostname: server4
  - host_id: server5
    hostname: server5
  - host_id: server6
    hostname: server6
  - host_id: server7
    hostname: server7
  - host_id: server8
    hostname: server8
  - host_id: server9
    hostname: server9
  - host_id: server10
    hostname: server10
  - host_id: server11
    hostname: server11
  - host_id: server12
    hostname: server12
  - host_id: server13
    hostname: server13
  - host_id: server14
    hostname: server14
  - host_id: server15
    hostname: server15
  - host_id: server16
    hostname: server16
clients_reinstall: true                    # Whether reinstall clients
collect_interval: 60                       # The interval seconds to collect datapoint
continuous_query_interval: 4               # The interval of continuous query, * collect_interval is the real second
default_lustre_version: es3                # If not able to detect the Lustre version according to RPM versions, use this as the Lustre version. Supported: es2, es3, es4, error. If errior is configured, then error will be reported if not able to detect the Lustre version.
lustre_exp_ost: false			   # Whether collect exp_md_stats_*. Should be disabled if have many clients
lustre_exp_mdt: false			   # Whether collect exp_ost_stats_*. Should be disabled if have many clients
client_hosts:                              # Array of client hosts of ESMON
  - host_id: server17                      # Host ID
    lustre_oss: true                       # Whether enable Lustre OSS monitoring
    lustre_mds: true                       # Whether enable Lustre MDS monitoring
    ime: false                             # Whether enable IME monitoring
    sfas:                                  # Array of SFAs to collect
      - name: OST                          # Name of the SFA
        controller0_host: 10.0.0.5         # Hostname or IP of the controller 0
        controller1_host: 10.0.0.6         # Hostname or IP of the controller 1
    infiniband: false                      # Whether enable IB monitoring
  - host_id: server1
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server2
    lustre_oss: true
    lustre_mds: true
    ime: false
    infiniband: true
  - host_id: server4
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server5
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server6
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server7
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server8
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server9
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server10
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server11
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server12
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server13
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server14
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server15
    lustre_oss: true
    lustre_mds: true
    ime: false
  - host_id: server16
    lustre_oss: true
    lustre_mds: true
    ime: false
server_host:
    host_id: server17                      # Server host ID of ESMON
    reinstall: true                        # Whether to reinstall server
    drop_database: false                   # Whether to drop existing ESMON database in Influxdb
    erase_influxdb: false                  # Whether to erase all data/metadata of Influxdb
